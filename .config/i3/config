# https://i3wm.org/docs/userguide.html

set $mod Mod4
floating_modifier $mod
font pango:JetBrains Mono 8

# Network manager
exec --no-startup-id nm-applet
# Compositor
exec --no-startup-id picom --experimental-backends -b
# Notifications
exec --no-startup-id dunst

# Refresh i3blocks VOLUME (defined in ~/.config/i3blocks/config)
set $refresh_i3status_vol pkill -SIGRTMIN+2 i3blocks 
bindsym Mod4+comma exec --no-startup-id amixer set Master -q 5%- && $refresh_i3status_vol
bindsym Mod4+period exec --no-startup-id amixer set Master -q 5%+ && $refresh_i3status_vol

bindsym $mod+Return exec --no-startup-id kitty
bindsym $mod+d exec --no-startup-id "rofi -modi drun,run -show drun"
bindsym Print exec --no-startup-id maim -s | xclip -selection c -t image/png

# Window management
bindsym $mod+Shift+q kill

bindsym $mod+j focus left
bindsym $mod+k focus down
bindsym $mod+l focus up
bindsym $mod+semicolon focus right

bindsym $mod+Left focus left
bindsym $mod+Down focus down
bindsym $mod+Up focus up
bindsym $mod+Right focus right

bindsym $mod+Shift+j move left
bindsym $mod+Shift+k move down
bindsym $mod+Shift+l move up
bindsym $mod+Shift+semicolon move right

bindsym $mod+Shift+Left move left
bindsym $mod+Shift+Down move down
bindsym $mod+Shift+Up move up
bindsym $mod+Shift+Right move right

# Update i3blocks
set $refresh_i3status_indicator exec --no-startup-id pkill -SIGRTMIN+3 i3blocks

# Split
bindsym $mod+h split h; $refresh_i3status_indicator
bindsym $mod+v split v; $refresh_i3status_indicator

# Full screen
bindsym $mod+f fullscreen toggle

# Layout
bindsym $mod+s layout stacking
bindsym $mod+w layout tabbed
bindsym $mod+e layout toggle split

# Toggle floating
bindsym $mod+Shift+space floating toggle

# Change focus between tiling & floating windows
bindsym $mod+space focus mode_toggle
bindsym $mod+a focus parent

# Workspaces
bindsym $mod+Shift+d exec --no-startup-id i3-input -F 'rename workspace to "%s"' -P 'New name: '
bindsym  $mod+Tab workspace next
bindsym  $mod+Shift+Tab workspace prev

set $ws1 "1"
set $ws2 "2"
set $ws3 "3"
set $ws4 "4"
set $ws5 "5"
set $ws6 "6"
set $ws7 "7"
set $ws8 "8"
set $ws9 "9"
set $ws10 "10"

bindsym $mod+1 workspace number $ws1
bindsym $mod+2 workspace number $ws2
bindsym $mod+3 workspace number $ws3
bindsym $mod+4 workspace number $ws4
bindsym $mod+5 workspace number $ws5
bindsym $mod+6 workspace number $ws6
bindsym $mod+7 workspace number $ws7
bindsym $mod+8 workspace number $ws8
bindsym $mod+9 workspace number $ws9
bindsym $mod+0 workspace number $ws10

bindsym $mod+Shift+1 move container to workspace number $ws1
bindsym $mod+Shift+2 move container to workspace number $ws2
bindsym $mod+Shift+3 move container to workspace number $ws3
bindsym $mod+Shift+4 move container to workspace number $ws4
bindsym $mod+Shift+5 move container to workspace number $ws5
bindsym $mod+Shift+6 move container to workspace number $ws6
bindsym $mod+Shift+7 move container to workspace number $ws7
bindsym $mod+Shift+8 move container to workspace number $ws8
bindsym $mod+Shift+9 move container to workspace number $ws9
bindsym $mod+Shift+0 move container to workspace number $ws10

# Maintanence
# Reload config
bindsym $mod+Shift+c reload
# Restart i3 inplace
bindsym $mod+Shift+r restart
# Exit
bindsym $mod+Shift+e exec "i3-nagbar -t warning -m 'You pressed the exit shortcut. Do you really want to exit i3? This will end your X session.' -B 'Yes, exit i3' 'i3-msg exit'"

# resize window (you can also use the mouse for that)
mode "resize" {
        bindsym j resize shrink width 10 px or 10 ppt
        bindsym k resize grow height 10 px or 10 ppt
        bindsym l resize shrink height 10 px or 10 ppt
        bindsym semicolon resize grow width 10 px or 10 ppt

        bindsym Left resize shrink width 10 px or 10 ppt
        bindsym Down resize grow height 10 px or 10 ppt
        bindsym Up resize shrink height 10 px or 10 ppt
        bindsym Right resize grow width 10 px or 10 ppt

        bindsym Return mode "default"
        bindsym Escape mode "default"
        bindsym $mod+r mode "default"
}

bindsym $mod+r mode "resize"

# Passthrough mode
mode  "Passthrough Mode - Press MOD+F12 to exit" {
        bindsym $mod+F12 mode "default"
}
bindsym $mod+F12 mode "Passthrough Mode - Press MOD+F12 to exit"

# i3bar
bar {
	i3bar_command i3bar -t
        status_command i3status-rs ~/.config/i3status-rs/config.toml
	font pango:JetBrains Mono, FontAwesome 11.5
	position top
	colors {
        	#background #222d32
        	background #222d3280
		focused_workspace  #000000FF #8b0000 #FFFFFF
		inactive_workspace #FFFFFF00 #862924 #862924
		urgent_workspace   #FFFFFF00 #0096FF #0096FF
	}
}

for_window [class=".*"] border pixel 0
gaps inner 19
